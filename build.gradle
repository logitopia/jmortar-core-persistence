/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.5/userguide/tutorial_java_projects.html
 */
buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.0"
    }
}

subprojects {
    apply plugin: 'java'

    // Disable the test report for the individual test task
    test {
        reports.html.enabled = false
    }
}

//task testReport(type: TestReport) {
//    destinationDir = file("$buildDir/reports/allTests")
//    // Include the results from the `test` task in all subprojects
//    reportOn subprojects*.test
//}

task testReports( type : TestReport ) {
    group 'Create a release'
    description 'Runs test reports and outputs them to the sites directory so that they are published.'

    // Store the test reports into our documentation site
    destinationDir = file("docs/TestReport/${version.replaceAll("\\."  ,  "_")}")
//    reports.junitXml.destination = new File("docs/TestReport/${version.replaceAll("\\."  ,  "_")}/xml")
//    reports.html.destination = new File("docs/TestReport/${version.replaceAll("\\."  ,  "_")}")

    reportOn subprojects*.test
}
